<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Bus India - Employee Directory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .employee-card {
            transition: all 0.3s ease;
        }
        .employee-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .modal {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
        <!-- Header -->
        <header class="bg-white shadow-md">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <h1 class="ml-3 text-2xl font-bold text-gray-800">Magic Bus India - Employee Directory</h1>
                    </div>
                    <button id="addEmployeeBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md flex items-center transition duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                        Add Employee
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Search and Filter -->
            <div class="mb-8">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <div class="relative mb-4 md:mb-0 md:w-1/3">
                        <input type="text" id="searchInput" placeholder="Search employees..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute left-3 top-2.5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <div class="flex flex-col sm:flex-row sm:items-center gap-2">
                        <div class="flex items-center">
                            <span class="text-gray-600 mr-2">Sort by:</span>
                            <select id="sortSelect" class="border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="name">Name</option>
                                <option value="date">Date Joined</option>
                                <option value="role">Role</option>
                            </select>
                        </div>
                        <div class="flex items-center">
                            <span class="text-gray-600 mr-2">Filter:</span>
                            <select id="departmentFilter" class="border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="all">All Departments</option>
                                <option value="Mobilization">Mobilization</option>
                                <option value="Training">Training</option>
                                <option value="Profiling">Profiling</option>
                                <option value="Placement">Placement</option>
                                <option value="Management">Management</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8">
                <div class="bg-white rounded-lg shadow p-4 border-l-4 border-blue-500">
                    <h3 class="text-sm font-medium text-gray-500">Total Employees</h3>
                    <p id="totalEmployees" class="text-2xl font-bold text-gray-800">0</p>
                </div>
                <div class="bg-white rounded-lg shadow p-4 border-l-4 border-green-500">
                    <h3 class="text-sm font-medium text-gray-500">Departments</h3>
                    <p id="totalDepartments" class="text-2xl font-bold text-gray-800">0</p>
                </div>
                <div class="bg-white rounded-lg shadow p-4 border-l-4 border-purple-500">
                    <h3 class="text-sm font-medium text-gray-500">Roles</h3>
                    <p id="totalRoles" class="text-2xl font-bold text-gray-800">0</p>
                </div>
                <div class="bg-white rounded-lg shadow p-4 border-l-4 border-yellow-500">
                    <h3 class="text-sm font-medium text-gray-500">New This Year</h3>
                    <p id="newThisYear" class="text-2xl font-bold text-gray-800">0</p>
                </div>
            </div>

            <!-- Employee Grid -->
            <div id="employeeGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Employee cards will be dynamically added here -->
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="hidden text-center py-16">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-400 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <h3 class="text-lg font-medium text-gray-900">No employees found</h3>
                <p class="mt-1 text-gray-500">Get started by adding your first employee.</p>
                <button id="emptyStateAddBtn" class="mt-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition duration-300">
                    Add Employee
                </button>
            </div>
        </main>

        <!-- Add/Edit Employee Modal -->
        <div id="employeeModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 hidden modal">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden">
                <div class="px-6 py-4 bg-indigo-600 text-white flex justify-between items-center">
                    <h3 id="modalTitle" class="text-lg font-medium">Add New Employee</h3>
                    <button id="closeModal" class="text-white hover:text-gray-200 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form id="employeeForm" class="px-6 py-4">
                    <input type="hidden" id="employeeId">
                    <div class="mb-4">
                        <label for="name" class="block text-gray-700 font-medium mb-2">Full Name</label>
                        <input type="text" id="name" name="name" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="email" class="block text-gray-700 font-medium mb-2">Email Address</label>
                        <input type="email" id="email" name="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="position" class="block text-gray-700 font-medium mb-2">Position</label>
                        <input type="text" id="position" name="position" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="department" class="block text-gray-700 font-medium mb-2">Department</label>
                        <select id="department" name="department" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Select Department</option>
                            <option value="Mobilization">Mobilization</option>
                            <option value="Training">Training</option>
                            <option value="Profiling">Profiling</option>
                            <option value="Placement">Placement</option>
                            <option value="Management">Management</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="joinDate" class="block text-gray-700 font-medium mb-2">Date Joined</label>
                        <input type="date" id="joinDate" name="joinDate" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div class="flex justify-end pt-2">
                        <button type="button" id="cancelBtn" class="mr-2 px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
                            Cancel
                        </button>
                        <button type="submit" id="saveBtn" class="px-4 py-2 text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                            Save Employee
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Employee Detail Modal -->
        <div id="detailModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 hidden modal">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden">
                <div class="px-6 py-4 bg-indigo-600 text-white flex justify-between items-center">
                    <h3 id="detailTitle" class="text-lg font-medium">Employee Details</h3>
                    <button id="closeDetailModal" class="text-white hover:text-gray-200 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="px-6 py-4">
                    <div class="flex justify-center mb-6">
                        <div id="detailAvatar" class="h-24 w-24 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-2xl font-bold"></div>
                    </div>
                    <div class="mb-4">
                        <h4 class="text-sm text-gray-500">Full Name</h4>
                        <p id="detailName" class="text-gray-800 font-medium"></p>
                    </div>
                    <div class="mb-4">
                        <h4 class="text-sm text-gray-500">Email Address</h4>
                        <p id="detailEmail" class="text-gray-800 font-medium"></p>
                    </div>
                    <div class="mb-4">
                        <h4 class="text-sm text-gray-500">Position</h4>
                        <p id="detailPosition" class="text-gray-800 font-medium"></p>
                    </div>
                    <div class="mb-4">
                        <h4 class="text-sm text-gray-500">Department</h4>
                        <p id="detailDepartment" class="text-gray-800 font-medium"></p>
                    </div>
                    <div class="mb-4">
                        <h4 class="text-sm text-gray-500">Date Joined</h4>
                        <p id="detailJoinDate" class="text-gray-800 font-medium"></p>
                    </div>
                    <div class="flex justify-end pt-2 border-t border-gray-200">
                        <button type="button" id="editBtn" class="mr-2 px-4 py-2 text-indigo-600 border border-indigo-600 rounded-md hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                            Edit
                        </button>
                        <button type="button" id="deleteBtn" class="px-4 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="deleteModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 hidden modal">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden">
                <div class="px-6 py-4 bg-red-600 text-white flex justify-between items-center">
                    <h3 class="text-lg font-medium">Confirm Deletion</h3>
                    <button id="closeDeleteModal" class="text-white hover:text-gray-200 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="px-6 py-4">
                    <div class="mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-red-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        <p class="text-center text-gray-700">Are you sure you want to delete this employee? This action cannot be undone.</p>
                    </div>
                    <div class="flex justify-end pt-2">
                        <button type="button" id="cancelDeleteBtn" class="mr-2 px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
                            Cancel
                        </button>
                        <button type="button" id="confirmDeleteBtn" class="px-4 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize employees from localStorage or use provided data
            let employees = JSON.parse(localStorage.getItem('employees'));
            
            // Function to convert date format from DD-MM-YYYY to YYYY-MM-DD
            function convertDateFormat(dateString) {
                if (!dateString) return '';
                const parts = dateString.split('-');
                if (parts.length !== 3) return dateString;
                return ${parts[2]}-${parts[1]}-${parts[0]};
            }
            
            // If no employees in localStorage, use the provided data
            if (!employees || employees.length === 0) {
                employees = [
                    // Original employees
                    {
                        id: 1,
                        name: 'Muthukumar',
                        email: 'muthukumar_18052@magicbusindia.org',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2022-12-15'
                    },
                    {
                        id: 2,
                        name: 'Logesh',
                        email: 'logeshkumar_19645@magicbusindia.org',
                        position: 'Training Officer',
                        department: 'Training',
                        joinDate: '2023-12-18'
                    },
                    {
                        id: 3,
                        name: 'Sneha Manikandan',
                        email: 'sneha.manikandan@magicbusindia.org',
                        position: 'Training Officer',
                        department: 'Training',
                        joinDate: '2024-02-09'
                    },
                    {
                        id: 4,
                        name: 'Fathima Banu S',
                        email: 'fathimabanu.s@magicbusindia.org',
                        position: 'Profiling Officer',
                        department: 'Profiling',
                        joinDate: '2024-05-31'
                    },
                    {
                        id: 5,
                        name: 'Gokul Raj S',
                        email: 'gokul.s@magicbusindia.org',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2024-06-27'
                    },
                    {
                        id: 6,
                        name: 'Hari Prashanth Balasubramaniam',
                        email: 'hariprashanth.balasubramaniam@magicbusindia.org',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2024-07-31'
                    },
                    {
                        id: 7,
                        name: 'Vellingiri M',
                        email: 'vellingiri.m@magicbusindia.org',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2024-08-02'
                    },
                    {
                        id: 8,
                        name: 'Roja Nagarajan',
                        email: 'roja.nagarajan@magicbusindia.org',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2024-08-23'
                    },
                    {
                        id: 9,
                        name: 'Raju Murugan',
                        email: 'raju.41668@magicbusindia.org',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2025-04-21'
                    },
                    {
                        id: 10,
                        name: 'Soban Muthuraj Baskaran',
                        email: 'soban.41669@magicbusindia.org',
                        position: 'Profiling Officer',
                        department: 'Profiling',
                        joinDate: '2025-04-21'
                    },
                    {
                        id: 11,
                        name: 'Akshay Kannan',
                        email: 'akshay.kannan@magicbusindia.org',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2025-04-25'
                    },
                    {
                        id: 12,
                        name: 'Mathivanan A',
                        email: 'mathivanan.a@magicbusindia.org',
                        position: 'Mobilization Officer',
                        department: 'Mobilization', 
                        joinDate: '2025-04-25'
                    },
                    {
                        id: 13,
                        name: 'Kaviya Tirumal',
                        email: 'kaviya.tirumal@magicbusindia.org',
                        position: 'Profiling Officer',
                        department: 'Profiling',
                        joinDate: '2025-04-25'
                    },
                    {
                        id: 14,
                        name: 'Harini',
                        email: 'harini.41708@magicbusindia.org',
                        position: 'Profiling Officer',
                        department: 'Profiling',
                        joinDate: '2025-04-28'
                    },
                    {
                        id: 15,
                        name: 'Gayathri Sundarraj',
                        email: 'gayathri.sundarraj@magicbusindia.org',
                        position: 'Profiling Officer',
                        department: 'Profiling',
                        joinDate: '2025-04-28'
                    },
                    {
                        id: 16,
                        name: 'Srilatha S',
                        email: 'srilatha.s@magicbusindia.org',
                        position: 'Training Officer',
                        department: 'Training',
                        joinDate: '2025-05-05'
                    },
                    {
                        id: 17,
                        name: 'Jeba John',
                        email: 'jeba.john@magicbusindia.org',
                        position: 'Training Officer',
                        department: 'Training',
                        joinDate: '2025-05-05'
                    },
                    {
                        id: 18,
                        name: 'Agil Thainesh',
                        email: 'agil.thainesh@magicbusindia.org',
                        position: 'Sr Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2025-05-05'
                    },
                    {
                        id: 19,
                        name: 'Arul Balaji N',
                        email: 'arul.n@magicbusindia.org',
                        position: 'Training Officer',
                        department: 'Training',
                        joinDate: '2025-05-05'
                    },
                    
                    // New employees
                    {
                        id: 20,
                        name: 'T Devi',
                        email: 'devi.t@magicbusindia.org',
                        position: 'Profiling Officer',
                        department: 'Profiling',
                        joinDate: '2024-09-02'
                    },
                    {
                        id: 21,
                        name: 'SRUTHI VR',
                        email: 'sruthi@magicbusindia.org',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2022-09-12'
                    },
                    {
                        id: 22,
                        name: 'Sathish Kumar.S',
                        email: 'sathishkumar.s@magicbusindia.org',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2024-09-02'
                    },
                    {
                        id: 23,
                        name: 'Hemanth P',
                        email: 'hemanth.p@magicbusindia.org',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2024-09-11'
                    },
                    {
                        id: 24,
                        name: 'Manoj kumar',
                        email: 'manoj.v@magicbusindia.org',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2024-10-10'
                    },
                    {
                        id: 25,
                        name: 'Ganesh.V',
                        email: 'ganesh.v@magicbusindia.org',
                        position: 'Program Manager',
                        department: 'Management',
                        joinDate: '2024-10-23'
                    },
                    {
                        id: 26,
                        name: 'Lavanya S',
                        email: 'lavanya.s@magicbusindia.org',
                        position: 'Profiling Officer',
                        department: 'Profiling',
                        joinDate: '2024-09-20'
                    },
                    {
                        id: 27,
                        name: 'Maruthu Pandi M',
                        email: 'maruthu.m@magicbusindia.org',
                        position: 'Training Officer',
                        department: 'Training',
                        joinDate: '2024-09-18'
                    },
                    {
                        id: 28,
                        name: 'Babu V',
                        email: 'babu.v@magicbusindia.org',
                        position: 'Training Officer',
                        department: 'Training',
                        joinDate: '2024-09-18'
                    },
                    {
                        id: 29,
                        name: 'Vignesh',
                        email: '',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2022-12-15'
                    },
                    {
                        id: 30,
                        name: 'Dillibai',
                        email: '',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2024-08-23'
                    },
                    {
                        id: 31,
                        name: 'Yougesh',
                        email: '',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2022-12-26'
                    },
                    {
                        id: 32,
                        name: 'Sharmila KS',
                        email: '',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2025-04-18'
                    },
                    {
                        id: 33,
                        name: 'Praveenkumar R',
                        email: '',
                        position: 'Profiling Executive',
                        department: 'Profiling',
                        joinDate: '2025-03-21'
                    },
                    {
                        id: 34,
                        name: 'Meenakshi',
                        email: '',
                        position: 'Profiling Executive',
                        department: 'Profiling',
                        joinDate: '2022-12-15'
                    },
                    {
                        id: 35,
                        name: 'Yaazhini',
                        email: '',
                        position: 'Soft Skill Trainer',
                        department: 'Training',
                        joinDate: '2024-08-31'
                    },
                    {
                        id: 36,
                        name: 'Sujitha',
                        email: '',
                        position: 'Soft Skill Trainer',
                        department: 'Training',
                        joinDate: '2024-08-31'
                    },
                    {
                        id: 37,
                        name: 'Nisha Karunanithi',
                        email: '',
                        position: 'Soft Skill Trainer',
                        department: 'Training',
                        joinDate: '2021-05-03'
                    },
                    {
                        id: 38,
                        name: 'Chandru',
                        email: '',
                        position: 'Soft Skill Trainer',
                        department: 'Training',
                        joinDate: '2022-09-09'
                    },
                    {
                        id: 39,
                        name: 'Gokul',
                        email: '',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2023-08-23'
                    },
                    {
                        id: 40,
                        name: 'Rakesh S',
                        email: '',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2024-08-23'
                    },
                    {
                        id: 41,
                        name: 'Sharukhan',
                        email: '',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2024-05-06'
                    },
                    {
                        id: 42,
                        name: 'Anand',
                        email: '',
                        position: 'Technical Trainer',
                        department: 'Training',
                        joinDate: '2025-04-21'
                    },
                    {
                        id: 43,
                        name: 'Sugumar P',
                        email: '',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2025-01-27'
                    },
                    {
                        id: 44,
                        name: 'Keerthana',
                        email: '',
                        position: 'Placement Officer',
                        department: 'Placement',
                        joinDate: '2025-03-18'
                    },
                    {
                        id: 45,
                        name: 'Sweatha P. K',
                        email: '',
                        position: 'Profiling Executive',
                        department: 'Profiling',
                        joinDate: '2024-05-06'
                    },
                    {
                        id: 46,
                        name: 'Arjun Harikumar',
                        email: '',
                        position: 'Profiling Executive',
                        department: 'Profiling',
                        joinDate: '2024-10-10'
                    },
                    {
                        id: 47,
                        name: 'Naveen Kumar C',
                        email: '',
                        position: 'Profiling Executive',
                        department: 'Profiling',
                        joinDate: '2025-02-24'
                    },
                    {
                        id: 48,
                        name: 'Kaushika',
                        email: '',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2024-05-06'
                    },
                    {
                        id: 49,
                        name: 'Alfred Kennedy J',
                        email: '',
                        position: 'Mobilization Officer',
                        department: 'Mobilization',
                        joinDate: '2024-10-16'
                    }
                ];
                
                // Save to localStorage
                localStorage.setItem('employees', JSON.stringify(employees));
            }

            // DOM elements
            const employeeGrid = document.getElementById('employeeGrid');
            const emptyState = document.getElementById('emptyState');
            const employeeModal = document.getElementById('employeeModal');
            const detailModal = document.getElementById('detailModal');
            const deleteModal = document.getElementById('deleteModal');
            const employeeForm = document.getElementById('employeeForm');
            const searchInput = document.getElementById('searchInput');
            const sortSelect = document.getElementById('sortSelect');
            const departmentFilter = document.getElementById('departmentFilter');
            
            // Stats elements
            const totalEmployeesEl = document.getElementById('totalEmployees');
            const totalDepartmentsEl = document.getElementById('totalDepartments');
            const totalRolesEl = document.getElementById('totalRoles');
            const newThisYearEl = document.getElementById('newThisYear');
            
            // Buttons
            const addEmployeeBtn = document.getElementById('addEmployeeBtn');
            const emptyStateAddBtn = document.getElementById('emptyStateAddBtn');
            const closeModal = document.getElementById('closeModal');
            const cancelBtn = document.getElementById('cancelBtn');
            const closeDetailModal = document.getElementById('closeDetailModal');
            const editBtn = document.getElementById('editBtn');
            const deleteBtn = document.getElementById('deleteBtn');
            const closeDeleteModal = document.getElementById('closeDeleteModal');
            const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
            const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');

            // Form fields
            const employeeIdField = document.getElementById('employeeId');
            const nameField = document.getElementById('name');
            const emailField = document.getElementById('email');
            const positionField = document.getElementById('position');
            const departmentField = document.getElementById('department');
            const joinDateField = document.getElementById('joinDate');

            // Detail fields
            const detailTitle = document.getElementById('detailTitle');
            const detailAvatar = document.getElementById('detailAvatar');
            const detailName = document.getElementById('detailName');
            const detailEmail = document.getElementById('detailEmail');
            const detailPosition = document.getElementById('detailPosition');
            const detailDepartment = document.getElementById('detailDepartment');
            const detailJoinDate = document.getElementById('detailJoinDate');

            // Current employee being edited or viewed
            let currentEmployeeId = null;

            // Initialize the employee grid
            renderEmployees();
            updateStats();

            // Event listeners
            addEmployeeBtn.addEventListener('click', openAddModal);
            emptyStateAddBtn.addEventListener('click', openAddModal);
            closeModal.addEventListener('click', closeEmployeeModal);
            cancelBtn.addEventListener('click', closeEmployeeModal);
            employeeForm.addEventListener('submit', saveEmployee);
            closeDetailModal.addEventListener('click', closeEmployeeDetailModal);
            editBtn.addEventListener('click', editEmployee);
            deleteBtn.addEventListener('click', openDeleteModal);
            closeDeleteModal.addEventListener('click', closeEmployeeDeleteModal);
            cancelDeleteBtn.addEventListener('click', closeEmployeeDeleteModal);
            confirmDeleteBtn.addEventListener('click', deleteEmployee);
            searchInput.addEventListener('input', renderEmployees);
            sortSelect.addEventListener('change', renderEmployees);
            departmentFilter.addEventListener('change', renderEmployees);

            // Functions
            function updateStats() {
                // Total employees
                totalEmployeesEl.textContent = employees.length;
                
                // Total departments
                const departments = new Set(employees.map(emp => emp.department));
                totalDepartmentsEl.textContent = departments.size;
                
                // Total roles
                const roles = new Set(employees.map(emp => emp.position));
                totalRolesEl.textContent = roles.size;
                
                // New this year
                const currentYear = new Date().getFullYear();
                const newEmployees = employees.filter(emp => {
                    const joinDate = new Date(emp.joinDate);
                    return joinDate.getFullYear() === currentYear;
                });
                newThisYearEl.textContent = newEmployees.length;
            }

            function renderEmployees() {
                const searchTerm = searchInput.value.toLowerCase();
                const sortBy = sortSelect.value;
                const departmentValue = departmentFilter.value;
                
                // Filter employees based on search term and department
                let filteredEmployees = employees.filter(employee => {
                    const matchesSearch = 
                        employee.name.toLowerCase().includes(searchTerm) || 
                        (employee.email && employee.email.toLowerCase().includes(searchTerm)) ||
                        employee.position.toLowerCase().includes(searchTerm) ||
                        employee.department.toLowerCase().includes(searchTerm);
                    
                    const matchesDepartment = departmentValue === 'all' || employee.department === departmentValue;
                    
                    return matchesSearch && matchesDepartment;
                });
                
                // Sort employees
                filteredEmployees.sort((a, b) => {
                    if (sortBy === 'name') {
                        return a.name.localeCompare(b.name);
                    } else if (sortBy === 'date') {
                        return new Date(a.joinDate) - new Date(b.joinDate);
                    } else if (sortBy === 'role') {
                        return a.position.localeCompare(b.position);
                    }
                    return 0;
                });
                
                // Clear the grid
                employeeGrid.innerHTML = '';
                
                // Show empty state if no employees
                if (filteredEmployees.length === 0) {
                    if (searchTerm || departmentValue !== 'all') {
                        emptyState.querySelector('h3').textContent = 'No matching employees found';
                        emptyState.querySelector('p').textContent = 'Try adjusting your search criteria.';
                        emptyState.querySelector('button').style.display = 'none';
                    } else {
                        emptyState.querySelector('h3').textContent = 'No employees found';
                        emptyState.querySelector('p').textContent = 'Get started by adding your first employee.';
                        emptyState.querySelector('button').style.display = 'block';
                    }
                    emptyState.classList.remove('hidden');
                } else {
                    emptyState.classList.add('hidden');
                    
                    // Render each employee card
                    filteredEmployees.forEach(employee => {
                        const card = createEmployeeCard(employee);
                        employeeGrid.appendChild(card);
                    });
                }
            }

            function createEmployeeCard(employee) {
                const card = document.createElement('div');
                card.className = 'employee-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-200';
                
                // Get initials for avatar
                const initials = employee.name.split(' ').map(n => n[0]).join('').toUpperCase();
                
                // Format date
                const joinDate = new Date(employee.joinDate);
                const formattedDate = joinDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                });
                
                // Determine background color based on department
                let bgColor = 'bg-indigo-100';
                let textColor = 'text-indigo-600';
                
                if (employee.department === 'Mobilization') {
                    bgColor = 'bg-blue-100';
                    textColor = 'text-blue-600';
                } else if (employee.department === 'Training') {
                    bgColor = 'bg-green-100';
                    textColor = 'text-green-600';
                } else if (employee.department === 'Profiling') {
                    bgColor = 'bg-purple-100';
                    textColor = 'text-purple-600';
                } else if (employee.department === 'Placement') {
                    bgColor = 'bg-orange-100';
                    textColor = 'text-orange-600';
                } else if (employee.department === 'Management') {
                    bgColor = 'bg-red-100';
                    textColor = 'text-red-600';
                }
                
                card.innerHTML = `
                    <div class="p-5">
                        <div class="flex items-center mb-4">
                            <div class="h-12 w-12 rounded-full ${bgColor} flex items-center justify-center ${textColor} font-bold mr-4">
                                ${initials}
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">${employee.name}</h3>
                                <p class="text-sm ${textColor} font-medium">${employee.position}</p>
                            </div>
                        </div>
                        <div class="mb-4">
                            ${employee.email ? `
                            <div class="flex items-center text-sm text-gray-600 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                </svg>
                                <span class="truncate">${employee.email}</span>
                            </div>
                            ` : ''}
                            <div class="flex items-center text-sm text-gray-600 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                                </svg>
                                ${employee.department}
                            </div>
                            <div class="flex items-center text-sm text-gray-600">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                Joined ${formattedDate}
                            </div>
                        </div>
                        <button class="view-details w-full ${bgColor} hover:bg-opacity-80 ${textColor} font-medium py-2 px-4 rounded-md transition duration-300" data-id="${employee.id}">
                            View Details
                        </button>
                    </div>
                `;
                
                // Add event listener to view details button
                card.querySelector('.view-details').addEventListener('click', () => {
                    openDetailModal(employee.id);
                });
                
                return card;
            }

            function openAddModal() {
                // Reset form
                employeeForm.reset();
                employeeIdField.value = '';
                currentEmployeeId = null;
                
                // Update modal title
                document.getElementById('modalTitle').textContent = 'Add New Employee';
                
                // Show modal
                employeeModal.classList.remove('hidden');
            }

            function closeEmployeeModal() {
                employeeModal.classList.add('hidden');
            }

            function saveEmployee(e) {
                e.preventDefault();
                
                const name = nameField.value;
                const email = emailField.value;
                const position = positionField.value;
                const department = departmentField.value;
                const joinDate = joinDateField.value;
                
                if (currentEmployeeId) {
                    // Update existing employee
                    const index = employees.findIndex(emp => emp.id === currentEmployeeId);
                    if (index !== -1) {
                        employees[index] = {
                            ...employees[index],
                            name,
                            email,
                            position,
                            department,
                            joinDate
                        };
                    }
                } else {
                    // Add new employee
                    const newId = employees.length > 0 ? Math.max(...employees.map(emp => emp.id)) + 1 : 1;
                    employees.push({
                        id: newId,
                        name,
                        email,
                        position,
                        department,
                        joinDate
                    });
                }
                
                // Save to localStorage
                localStorage.setItem('employees', JSON.stringify(employees));
                
                // Close modal and refresh grid
                closeEmployeeModal();
                renderEmployees();
                updateStats();
            }

            function openDetailModal(employeeId) {
                const employee = employees.find(emp => emp.id === employeeId);
                if (!employee) return;
                
                currentEmployeeId = employeeId;
                
                // Set detail values
                detailTitle.textContent = employee.name;
                
                // Get initials for avatar
                const initials = employee.name.split(' ').map(n => n[0]).join('').toUpperCase();
                detailAvatar.textContent = initials;
                
                // Determine background color based on department
                let bgColor = 'bg-indigo-100';
                let textColor = 'text-indigo-600';
                
                if (employee.department === 'Mobilization') {
                    bgColor = 'bg-blue-100';
                    textColor = 'text-blue-600';
                } else if (employee.department === 'Training') {
                    bgColor = 'bg-green-100';
                    textColor = 'text-green-600';
                } else if (employee.department === 'Profiling') {
                    bgColor = 'bg-purple-100';
                    textColor = 'text-purple-600';
                } else if (employee.department === 'Placement') {
                    bgColor = 'bg-orange-100';
                    textColor = 'text-orange-600';
                } else if (employee.department === 'Management') {
                    bgColor = 'bg-red-100';
                    textColor = 'text-red-600';
                }
                
                // Apply colors
                detailAvatar.className = h-24 w-24 rounded-full ${bgColor} flex items-center justify-center ${textColor} text-2xl font-bold;
                
                detailName.textContent = employee.name;
                detailEmail.textContent = employee.email || 'Not Available';
                detailPosition.textContent = employee.position;
                detailDepartment.textContent = employee.department;
                
                // Format date
                const joinDate = new Date(employee.joinDate);
                const formattedDate = joinDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                detailJoinDate.textContent = formattedDate;
                
                // Show modal
                detailModal.classList.remove('hidden');
            }

            function closeEmployeeDetailModal() {
                detailModal.classList.add('hidden');
            }

            function editEmployee() {
                const employee = employees.find(emp => emp.id === currentEmployeeId);
                if (!employee) return;
                
                // Close detail modal
                closeEmployeeDetailModal();
                
                // Set form values
                employeeIdField.value = employee.id;
                nameField.value = employee.name;
                emailField.value = employee.email || '';
                positionField.value = employee.position;
                departmentField.value = employee.department;
                joinDateField.value = employee.joinDate;
                
                // Update modal title
                document.getElementById('modalTitle').textContent = 'Edit Employee';
                
                // Show modal
                employeeModal.classList.remove('hidden');
            }

            function openDeleteModal() {
                deleteModal.classList.remove('hidden');
            }

            function closeEmployeeDeleteModal() {
                deleteModal.classList.add('hidden');
            }

            function deleteEmployee() {
                employees = employees.filter(emp => emp.id !== currentEmployeeId);
                
                // Save to localStorage
                localStorage.setItem('employees', JSON.stringify(employees));
                
                // Close modals
                closeEmployeeDeleteModal();
                closeEmployeeDetailModal();
                
                // Refresh grid
                renderEmployees();
                updateStats();
            }
        });
    </script>
</body>
</html>